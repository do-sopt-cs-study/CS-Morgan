# 네트워크와 OSI 7계층

# 네트워크

### 네트워크란?

네트워크란 정보가 전송되는 경로를 말한다. 컴퓨터 간 정보를 전송하는 경로를 **컴퓨터 네트워크**라 부른다. 컴퓨터 네트워크 상에는 파일과 같은 전자 데이터가 전달된다.

여기서 말하는 컴퓨터는 노트북과 데스크톱 컴퓨터뿐만 아니라, 스마트폰, 태블릿, 서버, 스마트 홈 기기, 센서, 자동차 등과 같이 **컴퓨터의 역할을 수행할 수 있는 모든 전자 기기**를 포함한다.

### LAN/WAN

**LAN**은 Local Area Network의 약어로 **좁은 범위의 네트워크**를 의미한다. LAN에는 버스 토폴로지, 링 토폴로지 등 다양한 규격이 존재한다. (토폴로지란 통신망 구조를 의미한다.)

- 다양한 LAN 규격
  ![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/5903d2af-1c20-4a29-95e1-e469dda1680e)

LAN은 보통 사무실이나 빌딩 내부에서 사용되며, 여러 대의 정보 기기를 갖춘 가정에 구축하는 네트워크도 LAN으로 칭한다.

**WAN**은 Wide Area Network의 약어로 멀리 떨어져 있는 LAN 사이를 연결한 광역 네트워크를 말한다. 보통 통신사에서 사용하는 광케이블로 연결된다. 우리가 쉽게 사용하는 **인터넷**도 WAN으로 간주될 수 있다.

WAN은 LAN보다 느리다. 그 이유는, LAN은 물리적 거리가 가깝기에 더욱 빠른 데이터 전송이 가능하다. WAN은 물리적 거리가 너무 멀기에 LAN보다 속도가 떨어질 수 밖에 없다.

### 서버와 클라이언트

네트워크에서 참여자는 **서버**와 **클라이언트**가 있다. 네트워크의 주인공은 클라이언트다. 서버는 **서비스를 요청 받아 처리**하는 보조 역할이며, 클라이언트는 **서비스를 요청하는 역할**이다.

소규모 LAN의 경우 **Peer-to-Peer** 형태의 네트워크가 된다. 여기서 각 컴퓨터는 다른 컴퓨터의 자원을 사용할 때는 클라이언트로서 요청을 보내고, 자신의 자원을 사용하고 싶다는 요청을 받을 경우 서버가 된다.

이와 반대로, 서버용으로 전용 컴퓨터를 설치하여 네트워크를 관리하는 방법이 있다. 클라이언트는 항상 모든 자원의 사용을 서버 컴퓨터에게 서비스를 요청해야지 사용할 수 있다.

---

# OSI 7계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/733b39ee-205c-4c4c-8b20-2499af153fda)

네트워크에서는 다른 기종 간에도 문제 없이 데이터를 송수신할 수 있도록 상호 호환성을 구현해야 한다. 이러한 상호 호환성과 확장성을 제공하기 위해 일곱 개의 층으로 나뉘어진 네트워크의 기본 구조를 **OSI 7계층 모델**이라고 한다.

하위 계층일수록 장비에 가깝고 상위 계층일수록 사용자에 가깝다.

### 미리보는 키워드

- **프로토콜** : 어떻게 통신할 것인지 약속, 규약 (헤더 구조가 어떻고 ~)
- **PDU** (Protocol Data Unit)
  - 해당 프로토콜의 데이터 단위 (OSI 모델에서의 정보 처리 단위)
- **노드 / 링크**
  - 그래프에서 정점(vertex)/간선(edge)을 네트워크에서 노드/링크라고 부름
    ex) 하나의 UTP 케이블로 두 PC를 연결 → PC는 노드, 케이블은 링크
- **NIC** (Network Interface Card) = 네트워크 어댑터, 랜카드
  ![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/b7f7ab76-a16e-4c3f-ab5a-1b9e15bdbf7e)
  - 하나의 MAC 주소를 부여받음
  - 2계층 프레임 ↔ 1계층 전기 신호 서로 변환하는 역할 (프레이밍)
  - 프레임에서 오류를 검출하고, 복구하는 역할 (100%는 아님)
  - 매체접근제어 수행 (충돌 방지)

### 1. 물리(Physical) 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/dc556d23-bb75-4af4-ad43-257b48b00c60)

**물리 계층**은 주로 전기적, 기계적 특성을 이용해서 통신 케이블로 데이터를 전송하는 **물리적인 장비**를 말한다. 1계층에서 사용되는 통신 단위는 **비트**이며 0과 1로 나타내어지는 전기 신호이다.

장비: 통신케이블, 리피터, 허브

- 그러면 와이파이는 무선 신호니까 물리계층일까?
  무선 통신 기술로, 신호를 물리적인 매체를 통해 전송하는 것이므로 **물리 계층**(Physical Layer)에 해당

### 2. 데이터링크(DataLink) 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/f64d2afd-4fdf-455a-8054-ad3a876a220b)

**데이터링크 계층**은 네트워크 장치 간에 **신뢰성 있는 데이터 전송**을 담당하는 계층을 의미한다. 해당 계층의 통신 단위는 **데이터 프레임**으로, 1계층에서의 전기신호에 Trailer와 Header를 붙여 데이터 프레임으로 바꾼다.

- **2계층 기능**
  - **주소지정**(MAC 주소)
    - 현재 노드의 물리 주소(발송)와 다음 노드의 물리 주소(수신)를 포함시킨다.
  - **접근제어**(MAC)
    - 동시에 여러 장치에서 한 링크에 신호를 보내면 간섭(충돌)이 생겨서 신호가 망가진다. 2계층에서는 이 충돌이 생기지 않도록 관리한다.
  - **오류 검출**
    - 1계층에서는 전기신호의 간섭, 물리적인 이유로 오류가 발생할 수 있다.
    - 프레임에 비트 오류를 검출할 수 있는 추가적인 비트(parity bit, CRC 등등)를 함께 전송한다.
    - 오류가 발생한 프레임을 발견하면 발생한 프레임 전체를 재전송을 요청하여 손상된 데이터를 복구한다.
- **데이터링크 프로토콜**
  - ABP: 송신 노드가 수신 노드에 패킷을 전송하고 ACK(Acknowledgement)가 도착할 때까지 송신 노드의 버퍼에 데이터를 간직하는 방식.
    - 버퍼에 데이터를 간직하는 이유는 수신 노드에서 받았다는 신호를 받지 못하면 재전송을 위해서.
  - SRP: 송신 노드가 수신 노드에 윈도우 크기만큼 패킷을 전송하고 ACK가 도착하지 않는 데이터에 대해서만 버퍼로 간직하여 재송신. 수신 노드에서는 재전송된 패킷들때문에 순서가 일치하지 않아 버퍼에 임시적으로 저장해두었다가 재정렬.
  - Go Back N: 송신 노드에서 연속하여 N(윈도우크기) 개의 패킷을 보내면 수신 노드에서는 수신된 이들 패킷에 대해 순서대로 확인(ACK) 신호를 송신 노드 발송. ACK 신호를 받지 못한 패킷부터 나머지까지 재전송.
    - SRP와 다른 점은 손상된 패킷으로부터 나머지 부분 전체를 재전송하므로 수신 측에서 순서가 다르지 않음.

### 3. 네트워크 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/5d06723b-5691-4260-85da-fef318f74897)

**네트워크 계층**은 멀리 떨어진 노드에 **여러 네트워크를 거쳐서 전송**하기 위한 계층을 의미한다. 우리가 흔히 부르는 공유기와 같은 **라우터**를 타고 이동하며, 네트워크 계층은 각각 **IP**라는 고유 주소를 가지게 된다.

네트워크 계층의 통신 단위는 **패킷**으로 목적지/출발지 IP 주소를 헤더에 포함한다. 데이터를 패킷 단위로 포장하여 전송하므로 순서가 섞이거나 일부가 소실될 수 있다.

### 4. 전송(Transport) 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/f0cd62cc-aa1f-45b7-989c-6eb749b0a856)

OSI 7계층은 **하위 계층**과 **상위 계층**으로 분류할 수 있다.

- **하위 계층**은 물리 계층부터 네트워크 계층으로 이용자와 무관하게 **네트워크 내에서 데이터 전달**을 위한 통로를 담당한다.
- **상위 계층**은 세션 계층에서 응용 계층까지로 **이용자의 메시지 표현 형식** 등을 담당한다.

4계층인 **전달 계층**은 하위 계층과 상위 계층 사이의 **인터페이스 기능**과 함께 **데이터 전송을 위한 종단 간 제어를 담당**한다. 송신 장치에서 패킷이 출발한 응용프로그램과 수신 장치에서 패킷이 도착하는 응용프로그램은 다르다. 전달 계층은 컴퓨터 내의 응용프로그램을 지정해준다.

전달 계층은 패킷의 헤더에 조립 순서와 어느 응용프로그램으로 보낼지 포함한다. 이 주소가 **포트** 혹은 **소켓 주소**이다. ex) 웹 [localhost:5173](http://localhost:5173)에서 서버 localhost:8080으로 요청 발송.

- **전송 계층의 프로토콜**
  ### TCP : 연결지향
  ![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/d9f2fd58-0e02-4502-b285-b1af063397e3)
  - 두 호스트 사이에서 패킷들을 보내기 위해 미리 연결 구성을 한다. 소켓 통신
  - 높은 신뢰성을 보장한다.
  - 흐름제어, 혼잡제어 같은 신뢰성을 위한 기능들을 지원 → 속도는 더 느리다.
  ### UDP : 비연결
  ![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/dd50ddd5-5d8a-444b-aca0-1d698d2d28d7)
  - 각 패킷을 독립적으로 전송한다. (데이터그램)
  - IP 체크섬을 이용한 최소한의 오류 검출만 수행한다.
  - 신뢰성이 낮다.
  - 속도가 빨라서 실시간 서비스에 적합

### 5. 세션 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/fcd4aa2b-4d63-4920-bec6-9214906c9974)

**세션 계층**은 송수신 사용자 사이에 **세션을 설정, 유지, 해제를 담당**하는 계층이다. 동기점마다 데이터를 교환 및 동기화를 한다. 또한 세션에는 **로그인 정보**를 포함하며 연결을 시도하는 **호스트의 자격에 관한 정보**를 가지고 있기도 하다.

- 세션 계층의 대화 방식
  - **전이중 방식 -** 하나의 연결을 통하여 데이터가 동시에 양방향으로 전달하는 방식
    - 라이브 스트림, 실시간 통신 -Socket
  - **반이중 방식 -** 전달에 대한 응답이 도착한 후에 다른 전달을 수행하는 방식
    - 워키토키
  - **단방향 방식 -** 한 쪽에서만 데이터를 수신 받는 방식
    - 웹 서버에서 클라이언트로 데이터 전송

### 6. 표현 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/36c44b33-c60f-469d-9c8c-9497f8c322de)

**표현 계층**은 내부적으로 **표현의 차이가 있는 데이터**라고 할지라도 **두 컴퓨터 간의 통신을 가능**하게 한다. 표현에는 **코드 변환**(code conversion), **데이터 압**축(data compression), **데이터 암호화**(data encryption) 등이 있다.

ex) 유니코드 인코딩/디코딩, JPEG 압축, 암호화 등등

### 7. 응용(Application) 계층

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/cfb3eeeb-4363-4006-8f37-ab880d105556)

**응용 계층**은 **사용자 대 사용자** 혹은 응용 **프로세스 대 응용 프로세스의 메시지 교환**을 담당한다. 사용자가 네트워크 자원에 접근하는 방법을 제공한다.(사용자가 실행하는 응용 프로그램들) HTTP, DNS (도메인 변환), SMTP (이메일) 등이 여기에 해당된다.

![image](https://github.com/do-sopt-cs-study/CS-Morgan/assets/51692363/ad223110-f7a2-4a35-a4b7-cf3a13624598)
